/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/kalman-filter@1.9.2/docs/dist/demo.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
require=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){const r=e("./observation-covariance.json"),i=100,o=.2;t.exports={observation:{dimension:4,stateProjection:[[1,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0]],covariance:r},dynamic:{name:"constant-acceleration",timeStep:.2,dimension:12,covariance:[i,i,1,1,4,4,.2*o,.2*o,i*o**4,i*o**4,1*o**4,1*o**4]}}},{"./observation-covariance.json":2}],2:[function(e,t,n){t.exports=[[34.31428571428572,-8.114285714285714,-9.185714285714285,3.0428571428571427],[-8.114285714285714,39.08571428571429,1.1857142857142857,-5.5285714285714285],[-9.185714285714285,1.1857142857142857,34.628571428571426,.7857142857142857],[3.0428571428571427,-5.5285714285714285,.7857142857142857,39.857142857142854]]},{}],3:[function(e,t,n){t.exports={observations:[[842,286,82,81],[714,184,92,80],[560,107,112,116],[418,94,96,110],[277,141,89,89],[146,200,88,72],[22,306,77,82]]}},{}],4:[function(e,t,n){t.exports=function({className:e,tag:t="div",bbox:n,parent:r,rotationCoefficient:i,scale:o,color:s}){const a=document.createElement(t);return a.id="arrow",a.className=e,a.style.top=Math.round(n[1])+"px",a.style.left=Math.round(n[0])+"px",i&&(a.style.transform=`rotate(${i}deg)`,a.style.transformOrigin="-5px 12px"),a.style.scale=o,a.style.color=s,r.append(a),a}},{}],5:[function(e,t,n){t.exports=function({className:e,tag:t="div",bbox:n,parent:r,color:i,percentage:o,position:s="vertical"}){const a=document.createElement(t);a.className=e,"vertical"===s&&(a.style.width="1px",a.style.height=Math.abs(n[1]-n[2])+"px",a.style.top=n[1]+"px",a.style.left=n[0]+"px"),"horizontal"===s&&(a.style.height="1px",a.style.width=Math.abs(n[1]-n[2])+"px",a.style.left=n[1]+"px",a.style.top=n[0]+"px");const c=`url("${`data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='${i}' stroke-width='4' stroke-dasharray='10%2c${Math.floor(100*o)}' stroke-dashoffset='0' stroke-linecap='round'/%3e%3c/svg%3e`}")`;return a.style.backgroundImage=c,r.append(a),a}},{}],6:[function(e,t,n){t.exports=function({id:e,className:t,tag:n="div",bbox:r,parent:i,rotationCoefficient:o}){const s=document.createElement(n);return s.className=t,s.id=e,s.style.width=Math.round(r[2])+"px",s.style.height=Math.round(r[3])+"px",s.style.top=Math.round(r[1]-r[3]/2)+"px",s.style.left=Math.round(r[0]-r[2]/2)+"px",o&&(s.style.transform=`rotate(${o}deg)`),i.append(s),s}},{}],7:[function(e,t,n){const r=e("./create-element"),i=e("./create-point"),o=e("./create-arrow"),s=e("./create-custom-dashed-line");t.exports=function({mean:e,covariance:t,color:n,parent:a,className:c,tag:l="div"}){const u=document.createElement(l);u.className=c;const d=[e[0][0]+e[2][0]/2,e[1][0]+e[3][0]/2];r({className:"box",bbox:[d[0],d[1],e[2][0],e[3][0]],parent:u,color:n,lineStyle:"solid"}),r({className:"box stdDev",bbox:[d[0],d[1],e[2][0]+6*Math.sqrt(t[2][2]),e[3][0]+6*Math.sqrt(t[3][3])],parent:u,color:n}),i({bbox:[d[0],d[1],2,2],parent:u,color:n});const m=t[0][1]/(Math.sqrt(t[0][0])*Math.sqrt(t[1][1]));r({className:"ellipse stdDev",bbox:[d[0],d[1],6*Math.sqrt(t[0][0]),6*Math.sqrt(t[1][1])],parent:u,rotationCoefficient:m,color:n});const f=t[0][2]/(Math.sqrt(t[0][0])*Math.sqrt(t[2][2]));s({className:"dashedLine",bbox:[d[0],d[1]+3*Math.sqrt(t[1][1]),d[1]+e[3][0]/2+3*Math.sqrt(t[3][3])],parent:u,percentage:Math.abs(f),color:n});const h=t[1][3]/(Math.sqrt(t[1][1])*Math.sqrt(t[3][3]));s({className:"dashedLine",bbox:[d[1],d[0]+3*Math.sqrt(t[0][0]),d[0]+e[2][0]/2+3*Math.sqrt(t[2][2])],parent:u,percentage:Math.abs(h),position:"horizontal",color:n});const p=-1*Math.atan(e[4][0]/e[5][0])*180/Math.PI-45,b=Math.sqrt(e[4][0]**2+e[5][0]**2);o({className:"arrow",bbox:[d[0]+6,d[1]-9],parent:u,rotationCoefficient:p,scale:b,color:n}),a.append(u)}},{"./create-arrow":4,"./create-custom-dashed-line":5,"./create-element":6,"./create-point":8}],8:[function(e,t,n){t.exports=function({className:e="point",tag:t="div",bbox:n,parent:r}){const i=document.createElement(t);return i.className=e,i.style.width=Math.round(n[2])+"px",i.style.height=Math.round(n[3])+"px",i.style.top=Math.round(n[1]-n[3]/2)+"px",i.style.left=Math.round(n[0]-n[2]/2)+"px",r.append(i),i}},{}],9:[function(e,t,n){const r=e("../lib/linalgebra/mat-mul.js"),i=e("../lib/linalgebra/transpose.js"),o=e("../lib/linalgebra/add.js"),s=e("../lib/linalgebra/invert.js"),a=e("../lib/linalgebra/sub.js"),c=e("../lib/linalgebra/identity.js"),l=e("./state.js"),u={info:(...e)=>console.log(...e),debug:()=>{},warn:(...e)=>console.log(...e),error:(...e)=>console.log(...e)};t.exports=class{constructor({dynamic:e,observation:t,logger:n=u}){this.dynamic=e,this.observation=t,this.logger=n}getValue(e,t){return"function"==typeof e?e(t):e}getInitState(){const{mean:e,covariance:t,index:n}=this.dynamic.init;return new l({mean:e,covariance:t,index:n})}getPredictedCovariance({previousCorrected:e}={}){const t={previousCorrected:e=e||this.getInitState(),index:e.index},n=this.getValue(this.dynamic.transition,t),s=i(n),a=r(n,e.covariance),c=r(a,s),l=this.getValue(this.dynamic.covariance,t);return o(l,c)}predict({previousCorrected:e}={}){e=e||this.getInitState(),l.check(e,{dimension:this.dynamic.dimension});const t={previousCorrected:e,index:e.index},n=this.getValue(this.dynamic.transition,t),i=r(n,e.mean),o=this.getPredictedCovariance({previousCorrected:e});let s;s="number"==typeof e.index?e.index+1:null;const a=new l({mean:i,covariance:o,index:s});return this.logger.debug("Prediction done",a),a}getGain({predicted:e,stateProjection:t}){const n={predicted:e,index:e.index};t=t||this.getValue(this.observation.stateProjection,n);const a=this.getValue(this.observation.covariance,n),c=i(t),l=r(r(t,e.covariance),c),u=o(l,a);return r(r(e.covariance,c),s(u))}getCorrectedCovariance({predicted:e}){const t={predicted:e,index:e.index},n=c(e.covariance.length),i=this.getValue(this.observation.stateProjection,t),o=this.getGain({predicted:e,stateProjection:i});return r(a(n,r(o,i)),e.covariance)}correct({predicted:e,observation:t}){if(l.check(e,{dimension:this.dynamic.dimension}),!t)throw new Error("no measure available");const n={predicted:e,index:e.index},i=this.getValue(this.observation.stateProjection,n),s=this.getGain({predicted:e,stateProjection:i}),c=a(t,r(i,e.mean)),u=o(e.mean,r(s,c));if(Number.isNaN(u[0][0]))throw new TypeError("Mean is NaN after correction");const d=this.getCorrectedCovariance({predicted:e}),m=new l({mean:u,covariance:d,index:e.index});return this.logger.debug("Correction done",m),m}}},{"../lib/linalgebra/add.js":14,"../lib/linalgebra/identity.js":18,"../lib/linalgebra/invert.js":19,"../lib/linalgebra/mat-mul.js":20,"../lib/linalgebra/sub.js":22,"../lib/linalgebra/transpose.js":25,"./state.js":33}],10:[function(e,t,n){const r=e("../linalgebra/identity.js");t.exports=function(e,t){const n=e.timeStep||1,i=t.observedProjection,o=t.stateProjection,s=t.dimension;let a;if(o&&Number.isInteger(o[0].length/3))a=t.stateProjection[0].length;else if(i)a=3*i[0].length;else{if(!s)throw new Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");a=3*s}const c=a/3,l=r(a);for(let e=0;e<c;e++)l[e][e+c]=n,l[e][e+2*c]=.5*n**2,l[e+c][e+2*c]=n;const u=new Array(c).fill(1).concat(new Array(c).fill(n*n)).concat(new Array(c).fill(n**4)),d=e.covariance||u;return Object.assign({},e,{dimension:a,transition:l,covariance:d})}},{"../linalgebra/identity.js":18}],11:[function(e,t,n){const r=e("../linalgebra/identity.js");t.exports=function(e,t){let n=e.dimension;const i=t.dimension,o=t.observedProjection,s=t.stateProjection;let a=e.covariance;e.dimension||(i?n=i:o?n=o[0].length:s&&(n=s[0].length));const c=r(n);return a=a||r(n),Object.assign({},e,{dimension:n,transition:c,covariance:a})}},{"../linalgebra/identity.js":18}],12:[function(e,t,n){const r=e("../linalgebra/identity.js");t.exports=function(e,t){const n=e.timeStep||1,i=t.observedProjection,o=t.stateProjection,s=t.dimension;let a;if(o&&Number.isInteger(o[0].length/2))a=t.stateProjection[0].length;else if(i)a=2*i[0].length;else{if(!s)throw new Error("observedProjection or stateProjection should be defined in observation in order to use constant-speed filter");a=2*s}const c=a/2,l=r(a);for(let e=0;e<c;e++)l[e][e+c]=n;const u=new Array(c).fill(1).concat(new Array(c).fill(n*n)),d=e.covariance||u;return Object.assign({},e,{dimension:a,transition:l,covariance:d})}},{"../linalgebra/identity.js":18}],13:[function(e,t,n){const r=e("./core-kalman-filter.js"),i=e("../lib/utils/array-to-matrix.js"),o=e("../lib/setup/set-dimensions.js"),s=e("../lib/setup/check-dimensions.js"),a=e("../lib/setup/build-state-projection.js"),c=e("../lib/setup/extend-dynamic-init.js"),l=e("./model-collection.js"),u=e("../lib/utils/to-function.js"),d=e("../lib/utils/deep-assign.js"),m=e("../lib/utils/polymorph-matrix.js"),f=e("./state.js"),h=e("../lib/linalgebra/distance-mat.js");t.exports=class extends r{constructor(e){const t=function(e){const{observation:t,dynamic:n}=e;return d(e,{observation:{stateProjection:u(m(t.stateProjection)),covariance:u(m(t.covariance,{dimension:t.dimension}))},dynamic:{transition:u(m(n.transition)),covariance:u(m(n.covariance,{dimension:n.dimension}))}})}(function({observation:e,dynamic:t}){"string"==typeof e.name&&(e=l.buildObservation(e)),"string"==typeof t.name&&(t=l.buildDynamic(t,e));const n=o({observation:e,dynamic:t}),r=s(n),i=a(r);return c(i)}(e));super(Object.assign({},e,t))}correct({predicted:e,observation:t}){const n=i({observation:t,dimension:this.observation.dimension});return super.correct({predicted:e,observation:n})}filter({previousCorrected:e,observation:t}){const n=super.predict({previousCorrected:e});return this.correct({predicted:n,observation:t})}filterAll(e){const{mean:t,covariance:n,index:r}=this.dynamic.init;let i=new f({mean:t,covariance:n,index:r});const o=[];for(const t of e){const e=this.predict({previousCorrected:i});i=this.correct({predicted:e,observation:t}),o.push(i.mean)}return o}asymptoticStateCovariance(e=100,t=1e-6){let n,r=super.getInitState();const i=[];for(let o=0;o<e;o++){let e=0;n=new f({covariance:super.getPredictedCovariance({previousCorrected:r})}),r=new f({covariance:super.getCorrectedCovariance({predicted:n})}),i.push(r.covariance);for(let n=1;n<4;n++)h(r.covariance,i[o-n])<t&&(e+=1);if(3===e)return i[o]}throw new Error("The state covariance does not converge asymptotically")}asymptoticGain(e=1e-6){const t=new f({covariance:this.asymptoticStateCovariance(e)});return super.getGain({previousCorrected:t})}}},{"../lib/linalgebra/distance-mat.js":16,"../lib/setup/build-state-projection.js":29,"../lib/setup/check-dimensions.js":30,"../lib/setup/extend-dynamic-init.js":31,"../lib/setup/set-dimensions.js":32,"../lib/utils/array-to-matrix.js":34,"../lib/utils/deep-assign.js":35,"../lib/utils/polymorph-matrix.js":36,"../lib/utils/to-function.js":37,"./core-kalman-filter.js":9,"./model-collection.js":27,"./state.js":33}],14:[function(e,t,n){const r=e("./elem-wise");t.exports=function(...e){return r(e,(e=>e.reduce(((e,t)=>e+t),0)))}},{"./elem-wise":17}],15:[function(e,t,n){const r=e("./zeros");t.exports=function(e){const t=r(e.length,e.length);for(const[n,r]of e.entries())t[n][n]=r;return t}},{"./zeros":26}],16:[function(e,t,n){const r=e("./trace.js"),i=e("./transpose.js"),o=e("./sub.js"),s=e("./mat-mul.js"),a=e("./sum.js");t.exports=function(e,t){if(void 0===e)return a(t);if(void 0===t)return a(e);const n=o(e,t),c=s(i(n),n);return Math.sqrt(r(c))}},{"./mat-mul.js":20,"./sub.js":22,"./sum.js":23,"./trace.js":24,"./transpose.js":25}],17:[function(e,t,n){t.exports=function(e,t){return e[0].map(((n,r)=>n.map(((n,i)=>{const o=e.map((e=>e[r][i]));return t(o,r,i)}))))}},{}],18:[function(e,t,n){t.exports=function(e){const t=[];for(let n=0;n<e;n++){const r=[];for(let t=0;t<e;t++)n===t?r.push(1):r.push(0);t.push(r)}return t}},{}],19:[function(e,t,n){const r=e("matrix-inverse");t.exports=function(e){return r(e)}},{"matrix-inverse":39}],20:[function(e,t,n){t.exports=function(e,t){const n=[];for(let r=0;r<e.length;r++){n[r]=[];for(let i=0;i<t[0].length;i++){let o=0;for(let n=0;n<e[0].length;n++)o+=e[r][n]*t[n][i];n[r][i]=o}}return n}},{}],21:[function(e,t,n){t.exports=function(e,{dimension:t}){const n=e[0].length;if(t<n)throw new TypeError("Dynamic dimension does not match with observedProjection");for(let r=0;r<n;r++)for(let i=0;i<t-n;i++)e[r].push(0);return e}},{}],22:[function(e,t,n){const r=e("./elem-wise");t.exports=function(...e){return r(e,(([e,t])=>e-t))}},{"./elem-wise":17}],23:[function(e,t,n){t.exports=function(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)t+=e[n][r];return t}},{}],24:[function(e,t,n){t.exports=function(e){let t=0;for(const[n,r]of e.entries())t+=r[n];return t}},{}],25:[function(e,t,n){t.exports=function(e){return e[0].map(((t,n)=>e.map((e=>e[n]))))}},{}],26:[function(e,t,n){t.exports=function(e,t){return new Array(e).fill(1).map((()=>new Array(t).fill(0)))}},{}],27:[function(e,t,n){const r={"constant-position":e("../lib/dynamic/constant-position.js"),"constant-speed":e("../lib/dynamic/constant-speed.js"),"constant-acceleration":e("../lib/dynamic/constant-acceleration.js")},i={sensors:e("../lib/observation/sensor.js")};t.exports={registerObservation:(e,t)=>{i[e]=t},registerDynamic:(e,t)=>{r[e]=t},buildObservation:e=>{if(!i[e.name])throw new Error("The provided observation model name is not registered");return i[e.name](e)},buildDynamic:(e,t)=>{if(!r[e.name])throw new Error("The provided dynamic model name is not registered");return r[e.name](e,t)}}},{"../lib/dynamic/constant-acceleration.js":10,"../lib/dynamic/constant-position.js":11,"../lib/dynamic/constant-speed.js":12,"../lib/observation/sensor.js":28}],28:[function(e,t,n){const r=e("../linalgebra/identity.js"),i=e("../utils/polymorph-matrix.js");t.exports=function(e){const{sensorDimension:t=1,sensorCovariance:n=1,nSensors:o=1}=e,s=i(n,{dimension:t}),a=r(t);let c=[],l=[];for(let e=0;e<o;e++)c=c.concat(a),l=l.concat(s);const u=i(l,{dimension:o*t});return Object.assign({},e,{dimension:t*o,observedProjection:c,covariance:u})}},{"../linalgebra/identity.js":18,"../utils/polymorph-matrix.js":36}],29:[function(e,t,n){const r=e("../linalgebra/pad-with-zeros.js"),i=e("../linalgebra/identity.js");t.exports=function({observation:e,dynamic:t}){const{observedProjection:n,stateProjection:o}=e,s=e.dimension,a=t.dimension;if(n&&o)throw new TypeError("You cannot use both observedProjection and stateProjection");if(n)return{observation:Object.assign({},e,{stateProjection:r(n,{dimension:a})}),dynamic:t};if(s&&a){const n=i(s);return{observation:Object.assign({},e,{stateProjection:r(n,{dimension:a})}),dynamic:t}}return{observation:e,dynamic:t}}},{"../linalgebra/identity.js":18,"../linalgebra/pad-with-zeros.js":21}],30:[function(e,t,n){t.exports=function({observation:e,dynamic:t}){const n=t.dimension,r=e.dimension;if(!n||!r)throw new TypeError("Dimension is not set");return{observation:e,dynamic:t}}},{}],31:[function(e,t,n){const r=e("../linalgebra/diag.js");t.exports=function({observation:e,dynamic:t}){if(!t.init){const n=1e6,i=t.dimension,o=new Array(i).fill(0),s=new Array(i).fill(n);return{observation:e,dynamic:Object.assign({},t,{init:{mean:o.map((e=>[e])),covariance:r(s)}})}}return{observation:e,dynamic:t}}},{"../linalgebra/diag.js":15}],32:[function(e,t,n){t.exports=function({observation:e,dynamic:t}){const n=e.stateProjection,r=t.transition,i=t.dimension,o=e.dimension;if(i&&o&&Array.isArray(n)&&(i!==n[0].length||o!==n.length))throw new TypeError("stateProjection dimensions not matching with observation and dynamic dimensions");if(i&&Array.isArray(r)&&i!==r.length)throw new TypeError("transition dimension not matching with dynamic dimension");return Array.isArray(n)?{observation:Object.assign({},e,{dimension:n.length}),dynamic:Object.assign({},t,{dimension:n[0].length})}:Array.isArray(r)?{observation:e,dynamic:Object.assign({},t,{dimension:r.length})}:{observation:e,dynamic:t}}},{}],33:[function(e,t,n){const r=function(e,t){if(e.reduce(((e,t)=>e.concat(t))).filter((e=>Number.isNaN(e))).length>0)throw new Error("Matrix should not have a NaN");t&&i(e,t)},i=function(e,t){if(e.length!==t[0])throw new Error("shape and length do not match");if(t.length>1)return e.forEach((e=>i(e,t.slice(1))))};class o{constructor({mean:e,covariance:t,index:n}){this.mean=e,this.covariance=t,this.index=n}check(){this.constructor.check(this)}static check(e,{dimension:t=null}={}){if(!(e instanceof o))throw new TypeError("The argument is not a state");const{mean:n,covariance:i}=e,s=n.length;if("number"==typeof t&&s!==t)throw new Error(`${s} and ${t} are not the same`);r(n,[s,1]),r(i,[s,s])}}t.exports=o},{}],34:[function(e,t,n){t.exports=function({observation:e,dimension:t}){if(!Array.isArray(e))throw new TypeError("The observation should be an array");if(e.length!==t)throw new TypeError("Observation and dimension not matching");return"number"==typeof e[0]?e.map((e=>[e])):e}},{}],35:[function(e,t,n){const r=e("./uniq.js"),i=function(e,t){if(t>100)throw new Error(`In deepAssign, number of recursive call (${t}) reached limit (100), deepAssign is not working on  self-referencing objects`);const n=e.filter((e=>null!=e)),o=n[n.length-1];if(1===n.length)return n[0];if("object"!=typeof o||Array.isArray(o))return o;if(0===n.length)return null;const s=n.filter((e=>"object"==typeof e));let a=[];s.forEach((e=>{a=a.concat(Object.keys(e))}));const c=r(a),l={};return c.forEach((e=>{const n=s.map((t=>t[e]));l[e]=i(n,t+1)})),l};t.exports=(...e)=>i(e,0)},{"./uniq.js":38}],36:[function(e,t,n){const r=e("../linalgebra/diag");t.exports=function(e,{dimension:t}={}){if("number"==typeof e||Array.isArray(e)){if("number"==typeof e&&"number"==typeof t)return r(new Array(t).fill(e));if(Array.isArray(e)&&Array.isArray(e[0]))return e;if(Array.isArray(e)&&"number"==typeof e[0])return r(e)}return e}},{"../linalgebra/diag":15}],37:[function(e,t,n){t.exports=function(e){if("function"==typeof e)return e;if(Array.isArray(e))return function(){return e};throw new Error("Only arrays and functions are authorized")}},{}],38:[function(e,t,n){t.exports=function(e){return e.filter(((t,n)=>e.indexOf(t)===n))}},{}],39:[function(e,t,n){var r={Matrix:function(){}};r.Matrix.create=function(e){return(new r.Matrix).setElements(e)},r.Matrix.I=function(e){for(var t,n=[],i=e;i--;)for(t=e,n[i]=[];t--;)n[i][t]=i===t?1:0;return r.Matrix.create(n)},r.Matrix.prototype={dup:function(){return r.Matrix.create(this.elements)},isSquare:function(){var e=0===this.elements.length?0:this.elements[0].length;return this.elements.length===e},toRightTriangular:function(){if(0===this.elements.length)return r.Matrix.create([]);var e,t,n,i,o=this.dup(),s=this.elements.length,a=this.elements[0].length;for(t=0;t<s;t++){if(0===o.elements[t][t])for(n=t+1;n<s;n++)if(0!==o.elements[n][t]){for(e=[],i=0;i<a;i++)e.push(o.elements[t][i]+o.elements[n][i]);o.elements[t]=e;break}if(0!==o.elements[t][t])for(n=t+1;n<s;n++){var c=o.elements[n][t]/o.elements[t][t];for(e=[],i=0;i<a;i++)e.push(i<=t?0:o.elements[n][i]-o.elements[t][i]*c);o.elements[n]=e}}return o},determinant:function(){if(0===this.elements.length)return 1;if(!this.isSquare())return null;for(var e=this.toRightTriangular(),t=e.elements[0][0],n=e.elements.length,r=1;r<n;r++)t*=e.elements[r][r];return t},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(e){if(0===this.elements.length)return this.dup();var t=e.elements||e;void 0===t[0][0]&&(t=r.Matrix.create(t).elements);var n,i=this.dup(),o=i.elements[0].length,s=i.elements.length,a=t[0].length;if(s!==t.length)return null;for(;s--;)for(n=a;n--;)i.elements[s][o+n]=t[s][n];return i},inverse:function(){if(0===this.elements.length)return null;if(!this.isSquare()||this.isSingular())return null;for(var e,t,n,i,o,s=this.elements.length,a=s,c=this.augment(r.Matrix.I(s)).toRightTriangular(),l=c.elements[0].length,u=[];a--;){for(n=[],u[a]=[],i=c.elements[a][a],t=0;t<l;t++)o=c.elements[a][t]/i,n.push(o),t>=s&&u[a].push(o);for(c.elements[a]=n,e=a;e--;){for(n=[],t=0;t<l;t++)n.push(c.elements[e][t]-c.elements[a][t]*c.elements[e][a]);c.elements[e]=n}}return r.Matrix.create(u)},setElements:function(e){var t,n,r=e.elements||e;if(r[0]&&void 0!==r[0][0]){for(t=r.length,this.elements=[];t--;)for(n=r[t].length,this.elements[t]=[];n--;)this.elements[t][n]=r[t][n];return this}var i=r.length;for(this.elements=[],t=0;t<i;t++)this.elements.push([r[t]]);return this}},t.exports=function(e){return r.Matrix.create(e).inverse().elements}},{}],main:[function(e,t,n){const r=e("../../lib/kalman-filter"),i=e("./observations.json").observations,o=e("./kf-options.js"),s=e("./views/create-element"),a=e("./views/create-group-boxes"),c=new r(o);let l=c.predict();const u=document.querySelector("#bikes");let d=Promise.resolve(),m=null;const f=e=>new Promise((t=>setTimeout(t,e)));t.exports={run(){i.forEach(((e,t)=>{d=d.then((()=>{l=c.predict({previousCorrected:m});const{mean:e,covariance:t}=l;return a({mean:e,covariance:t,parent:u,className:"predicted",color:"blue"}),f(200)})).then((e=>(s({className:"observation",bbox:[e[0]+e[2]/2,e[1]+e[3]/2,e[2],e[3]],parent:u,color:"white",lineStyle:"solid"}),f(200))).bind(null,e,t)).then((e=>{m=c.correct({predicted:l,observation:e});const{mean:t,covariance:n}=m;return a({mean:t,covariance:n,parent:u,className:"corrected",color:"red"}),f(200)}).bind(null,e,t))}))}}},{"../../lib/kalman-filter":13,"./kf-options.js":1,"./observations.json":3,"./views/create-element":6,"./views/create-group-boxes":7}]},{},[]);
//# sourceMappingURL=/sm/bc14029c1aa5d25b8f071c43bdcc4d2191ef8263fb829c8a4557a8d4eaa983b9.map