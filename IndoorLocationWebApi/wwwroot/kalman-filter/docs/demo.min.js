/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/kalman-filter@1.9.2/docs/demo.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
require=function e(t,o,r){function a(s,c){if(!o[s]){if(!t[s]){var i="function"==typeof require&&require;if(!c&&i)return i(s,!0);if(n)return n(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=o[s]={exports:{}};t[s][0].call(p.exports,(function(e){return a(t[s][1][e]||e)}),p,p.exports,e,t,o,r)}return o[s].exports}for(var n="function"==typeof require&&require,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(e,t,o){const r=e("./observation-covariance.json"),a=100,n=.2;t.exports={observation:{dimension:4,stateProjection:[[1,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,0]],covariance:r},dynamic:{name:"constant-acceleration",timeStep:.2,dimension:12,covariance:[a,a,1,1,4,4,.2*n,.2*n,a*n**4,a*n**4,1*n**4,1*n**4]}}},{"./observation-covariance.json":2}],2:[function(e,t,o){t.exports=[[34.31428571428572,-8.114285714285714,-9.185714285714285,3.0428571428571427],[-8.114285714285714,39.08571428571429,1.1857142857142857,-5.5285714285714285],[-9.185714285714285,1.1857142857142857,34.628571428571426,.7857142857142857],[3.0428571428571427,-5.5285714285714285,.7857142857142857,39.857142857142854]]},{}],3:[function(e,t,o){t.exports={observations:[[842,286,82,81],[714,184,92,80],[560,107,112,116],[418,94,96,110],[277,141,89,89],[146,200,88,72],[22,306,77,82]]}},{}],4:[function(e,t,o){t.exports=function({className:e,tag:t="div",bbox:o,parent:r,rotationCoefficient:a,scale:n,color:s}){const c=document.createElement(t);return c.id="arrow",c.className=e,c.style.top=Math.round(o[1])+"px",c.style.left=Math.round(o[0])+"px",a&&(c.style.transform=`rotate(${a}deg)`,c.style.transformOrigin="-5px 12px"),c.style.scale=n,c.style.color=s,r.append(c),c}},{}],5:[function(e,t,o){t.exports=function({className:e,tag:t="div",bbox:o,parent:r,color:a,percentage:n,position:s="vertical"}){const c=document.createElement(t);c.className=e,"vertical"===s&&(c.style.width="1px",c.style.height=Math.abs(o[1]-o[2])+"px",c.style.top=o[1]+"px",c.style.left=o[0]+"px"),"horizontal"===s&&(c.style.height="1px",c.style.width=Math.abs(o[1]-o[2])+"px",c.style.left=o[1]+"px",c.style.top=o[0]+"px");const i=`url("${`data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='${a}' stroke-width='4' stroke-dasharray='10%2c${Math.floor(100*n)}' stroke-dashoffset='0' stroke-linecap='round'/%3e%3c/svg%3e`}")`;return c.style.backgroundImage=i,r.append(c),c}},{}],6:[function(e,t,o){t.exports=function({id:e,className:t,tag:o="div",bbox:r,parent:a,rotationCoefficient:n}){const s=document.createElement(o);return s.className=t,s.id=e,s.style.width=Math.round(r[2])+"px",s.style.height=Math.round(r[3])+"px",s.style.top=Math.round(r[1]-r[3]/2)+"px",s.style.left=Math.round(r[0]-r[2]/2)+"px",n&&(s.style.transform=`rotate(${n}deg)`),a.append(s),s}},{}],7:[function(e,t,o){const r=e("./create-element"),a=e("./create-point"),n=e("./create-arrow"),s=e("./create-custom-dashed-line");t.exports=function({mean:e,covariance:t,color:o,parent:c,className:i,tag:l="div"}){const p=document.createElement(l);p.className=i;const d=[e[0][0]+e[2][0]/2,e[1][0]+e[3][0]/2];r({className:"box",bbox:[d[0],d[1],e[2][0],e[3][0]],parent:p,color:o,lineStyle:"solid"}),r({className:"box stdDev",bbox:[d[0],d[1],e[2][0]+6*Math.sqrt(t[2][2]),e[3][0]+6*Math.sqrt(t[3][3])],parent:p,color:o}),a({bbox:[d[0],d[1],2,2],parent:p,color:o});const h=t[0][1]/(Math.sqrt(t[0][0])*Math.sqrt(t[1][1]));r({className:"ellipse stdDev",bbox:[d[0],d[1],6*Math.sqrt(t[0][0]),6*Math.sqrt(t[1][1])],parent:p,rotationCoefficient:h,color:o});const u=t[0][2]/(Math.sqrt(t[0][0])*Math.sqrt(t[2][2]));s({className:"dashedLine",bbox:[d[0],d[1]+3*Math.sqrt(t[1][1]),d[1]+e[3][0]/2+3*Math.sqrt(t[3][3])],parent:p,percentage:Math.abs(u),color:o});const m=t[1][3]/(Math.sqrt(t[1][1])*Math.sqrt(t[3][3]));s({className:"dashedLine",bbox:[d[1],d[0]+3*Math.sqrt(t[0][0]),d[0]+e[2][0]/2+3*Math.sqrt(t[2][2])],parent:p,percentage:Math.abs(m),position:"horizontal",color:o});const x=-1*Math.atan(e[4][0]/e[5][0])*180/Math.PI-45,f=Math.sqrt(e[4][0]**2+e[5][0]**2);n({className:"arrow",bbox:[d[0]+6,d[1]-9],parent:p,rotationCoefficient:x,scale:f,color:o}),c.append(p)}},{"./create-arrow":4,"./create-custom-dashed-line":5,"./create-element":6,"./create-point":8}],8:[function(e,t,o){t.exports=function({className:e="point",tag:t="div",bbox:o,parent:r}){const a=document.createElement(t);return a.className=e,a.style.width=Math.round(o[2])+"px",a.style.height=Math.round(o[3])+"px",a.style.top=Math.round(o[1]-o[3]/2)+"px",a.style.left=Math.round(o[0]-o[2]/2)+"px",r.append(a),a}},{}],main:[function(e,t,o){const{KalmanFilter:r}=kalmanFilter,a=e("./observations.json").observations,n=e("./kf-options.js"),s=e("./views/create-element"),c=e("./views/create-group-boxes"),i=new r(n);let l=i.predict();const p=document.querySelector("#bikes");let d=Promise.resolve(),h=null;const u=e=>new Promise((t=>setTimeout(t,e)));t.exports={run(){a.forEach(((e,t)=>{d=d.then((()=>{l=i.predict({previousCorrected:h});const{mean:e,covariance:t}=l;return c({mean:e,covariance:t,parent:p,className:"predicted",color:"blue"}),u(200)})).then((e=>(s({className:"observation",bbox:[e[0]+e[2]/2,e[1]+e[3]/2,e[2],e[3]],parent:p,color:"white",lineStyle:"solid"}),u(200))).bind(null,e,t)).then((e=>{h=i.correct({predicted:l,observation:e});const{mean:t,covariance:o}=h;return c({mean:t,covariance:o,parent:p,className:"corrected",color:"red"}),u(200)}).bind(null,e,t))}))}}},{"./kf-options.js":1,"./observations.json":3,"./views/create-element":6,"./views/create-group-boxes":7}]},{},[]);
//# sourceMappingURL=/sm/1c88d3e9aa71951cb71c120388e7922e294ed133521bd3626f999eabcbcad286.map